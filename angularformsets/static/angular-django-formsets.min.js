/*!
 * AngularJS Django formsets directives v0.0.1 (http://hilios.github.io/angular-django-formsets/)
 * Copyright (c) 2014 Edson Hilios
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */

angular.module("djangoFormsets",[]),angular.module("djangoFormsets").controller("djangoFormsetController",["$attrs","$templateCache","$compile",function(a,b,c){var d=this;d.__fid__=0,d.__children__=[],d.__template__=b.get(a.djangoFormset),d.__formsetprefix__=a.djangoFormsetPrefix||"form",d.__candelete__=a.djangoFormsetCanDelete||!1,d.__canorder__=a.djangoFormsetCanOrder||!1,d.__formset__=null,d.__container__=null,d.__totalforms__=null,d.__minforms__=0,d.__maxforms__=1e3,d.setup=function(a){d.__formset__=a,d.__template__&&(d.__template__=d.__template__.replace(/^(\s|\n){1,}/gi,""));var b=new RegExp(d.__formsetprefix__+"\\-([0-9]{1,})","i"),c=new RegExp(d.__formsetprefix__+"\\-([A-Z_]+)");angular.forEach(d.__children__,function(a){var c,e=a.find("input").prop("name");e=e.match(b),e&&(c=parseInt(e[1]),c>d.__fid__&&(d.__fid__=c))}),angular.forEach(a.find("input"),function(a){var b=angular.element(a),e=b.prop("name").match(c);if(e)switch(e[1]){case"TOTAL_FORMS":d.__totalforms__=b;break;case"INITIAL_FORMS":d.__minforms__=parseInt(b.val());break;case"MAX_NUM_FORMS":d.__maxforms__=parseInt(b.val())}})},d.update=function(){d.__totalforms__&&d.__totalforms__.val(d.__children__.length)},d.addFormset=function(){if(d.__children__.length+1<=d.__maxforms__){d.__fid__+=1;var a=angular.element(d.__template__.replace(/__prefix__/gi,d.__fid__));d.__container__.append(a),c(a)(d.__formset__.scope())}},d.removeFormset=function(a){if(d.__children__.length-1>=d.__minforms__){for(var b=a,c=!1;!c&&"BODY"!==b.prop("tagName");)b=b.parent(),c=void 0!==b.attr("django-formset-child")||void 0!==b.attr("data-django-formset-child")||void 0!==b.attr("x-django-formset-child");"BODY"!==b.prop("tagName")&&(b.scope().$destroy(),b.remove())}},d.registerChild=function(a){d.__children__.push(a),d.update()},d.destroyChild=function(a){var b=d.__children__.indexOf(a);d.__children__.splice(b,1),d.update()}}]),angular.module("djangoFormsets").directive("djangoFormset",function(){return{require:"djangoFormset",restrict:"A",scope:!0,controller:"djangoFormsetController",link:function(a,b,c,d){d.setup(b)}}}).directive("djangoFormsetContainer",function(){return{require:"^djangoFormset",restrict:"A",link:function(a,b,c,d){d.__container__=b}}}).directive("djangoFormsetChild",function(){return{require:"^djangoFormset",restrict:"A",scope:!0,link:function(a,b,c,d){d.registerChild(b),a.$on("$destroy",function(){d.destroyChild(b)})}}}).directive("djangoFormsetAdd",function(){return{require:"^djangoFormset",restrict:"A",link:function(a,b,c,d){b.on("click",function(a){a.preventDefault(),d.addFormset(b)}),a.$on("$destroy",function(){b.off("click")})}}}).directive("djangoFormsetRemove",function(){return{require:"^djangoFormset",restrict:"A",link:function(a,b,c,d){b.on("click",function(a){a.preventDefault(),d.removeFormset(b)}),a.$on("$destroy",function(){b.off("click")})}}});
//# sourceMappingURL=angularformsets/static/angular-django-formsets.map